{"ast":null,"code":"import _toConsumableArray from\"/home/speudal/Documents/AccMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/home/speudal/Documents/AccMan/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import\"../Styles/Platform.css\";import{useState,useEffect}from\"react\";import Header from\"./Header.js\";import PlatformTable from\"./PlatformTable\";import FormAddColumn from\"./FormAddColumn\";import TopButtonsPlatform from\"./TopButtonsPlatform\";import FormAddEntry from\"./FormAddEntry\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Platform=function Platform(props){var _JSON$parse;var platform=props.match.params.platform;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),filter=_useState2[0],setFilter=_useState2[1];var storageEntries=JSON.parse(localStorage.getItem(\"\".concat(platform,\";entries\")));var _useState3=useState((_JSON$parse=JSON.parse(localStorage.getItem(\"\".concat(platform,\";columns\"))))!==null&&_JSON$parse!==void 0?_JSON$parse:[]),_useState4=_slicedToArray(_useState3,2),platformColumns=_useState4[0],setPlatformColumns=_useState4[1];var _useState5=useState(storageEntries!==null&&storageEntries!==void 0?storageEntries:[]),_useState6=_slicedToArray(_useState5,2),platformEntries=_useState6[0],setPlatformEntries=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),addColumn=_useState8[0],setAddColumn=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),addEntry=_useState10[0],setAddEntry=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),tableEditable=_useState12[0],setTableEditable=_useState12[1];useEffect(function(){var entries=storageEntries;if(!storageEntries||storageEntries===null){setPlatformEntries([]);return;}var newArray=entries.filter(function(entry){for(var i=0;i<entry.length;i++){if(entry[i].includes(filter))return true;}return false;});setPlatformEntries(newArray);},[filter,storageEntries]);var submitNewColumn=function submitNewColumn(e){e.preventDefault();var name=e.target.children[0].value;if(name===\"\")return;setPlatformColumns([].concat(_toConsumableArray(platformColumns),[name]));localStorage.setItem(\"\".concat(platform,\";columns\"),JSON.stringify([].concat(_toConsumableArray(platformColumns),[name])));e.target.children[0].value=\"\";};var submitNewEntry=function submitNewEntry(e){e.preventDefault();var children=_toConsumableArray(e.target.children).slice(0,-1).map(function(child){return child.value;});localStorage.setItem(\"\".concat(platform,\";entries\"),JSON.stringify([].concat(_toConsumableArray(platformEntries),[children])));setPlatformEntries([].concat(_toConsumableArray(platformEntries),[children]));var toClear=_toConsumableArray(e.target.children);toClear.forEach(function(elem){elem.value=\"\";});e.target.children[0].focus();};return/*#__PURE__*/_jsxs(\"div\",{id:\"mainDivPlatform\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"headDiv\",children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(\"span\",{id:\"platformName\",children:platform}),/*#__PURE__*/_jsx(\"div\",{id:\"hiddenDiv\"})]}),/*#__PURE__*/_jsxs(\"div\",{id:\"topTools\",children:[/*#__PURE__*/_jsx(TopButtonsPlatform,{filter:filter,setFilter:setFilter,addColumn:addColumn,setAddColumn:setAddColumn,setTableEditable:setTableEditable,tableEditable:tableEditable,addEntry:addEntry,setAddEntry:setAddEntry}),addEntry&&/*#__PURE__*/_jsx(FormAddEntry,{submitNewEntry:submitNewEntry,platformColumns:platformColumns}),addColumn&&/*#__PURE__*/_jsx(FormAddColumn,{submitNewColumn:submitNewColumn})]}),platformEntries.length===0?filter===\"\"?/*#__PURE__*/_jsx(\"div\",{className:\"emptyTable\",children:\"Click on the \\\"add an entry\\\" button to display the Table.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"emptyTable\",children:\"String not found in your data.\"}):/*#__PURE__*/_jsx(PlatformTable,{setPlatformColumns:setPlatformColumns,setPlatformEntries:setPlatformEntries,platformEntries:platformEntries,platformColumns:platformColumns,tableEditable:tableEditable,platform:platform})]});};export default Platform;","map":{"version":3,"sources":["/home/speudal/Documents/AccMan/src/Components/Platform.js"],"names":["useState","useEffect","Header","PlatformTable","FormAddColumn","TopButtonsPlatform","FormAddEntry","Platform","props","platform","match","params","filter","setFilter","storageEntries","JSON","parse","localStorage","getItem","platformColumns","setPlatformColumns","platformEntries","setPlatformEntries","addColumn","setAddColumn","addEntry","setAddEntry","tableEditable","setTableEditable","entries","newArray","entry","i","length","includes","submitNewColumn","e","preventDefault","name","target","children","value","setItem","stringify","submitNewEntry","slice","map","child","toClear","forEach","elem","focus"],"mappings":"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","sourcesContent":["import \"../Styles/Platform.css\";\nimport { useState, useEffect } from \"react\";\nimport Header from \"./Header.js\";\nimport PlatformTable from \"./PlatformTable\";\nimport FormAddColumn from \"./FormAddColumn\";\nimport TopButtonsPlatform from \"./TopButtonsPlatform\";\nimport FormAddEntry from \"./FormAddEntry\";\n\nconst Platform = (props) => {\n  const platform = props.match.params.platform;\n  const [filter, setFilter] = useState(\"\");\n  const storageEntries = JSON.parse(\n    localStorage.getItem(`${platform};entries`)\n  );\n  const [platformColumns, setPlatformColumns] = useState(\n    JSON.parse(localStorage.getItem(`${platform};columns`)) ?? []\n  );\n  const [platformEntries, setPlatformEntries] = useState(storageEntries ?? []);\n  const [addColumn, setAddColumn] = useState(false);\n  const [addEntry, setAddEntry] = useState(false);\n  const [tableEditable, setTableEditable] = useState(false);\n\n  useEffect(() => {\n    const entries = storageEntries;\n\n    if (!storageEntries || storageEntries === null) {\n      setPlatformEntries([]);\n      return;\n    }\n    const newArray = entries.filter((entry) => {\n      for (let i = 0; i < entry.length; i++)\n        if (entry[i].includes(filter)) return true;\n      return false;\n    });\n\n    setPlatformEntries(newArray);\n  }, [filter, storageEntries]);\n\n  const submitNewColumn = (e) => {\n    e.preventDefault();\n\n    const name = e.target.children[0].value;\n\n    if (name === \"\") return;\n    setPlatformColumns([...platformColumns, name]);\n    localStorage.setItem(\n      `${platform};columns`,\n      JSON.stringify([...platformColumns, name])\n    );\n    e.target.children[0].value = \"\";\n  };\n\n  const submitNewEntry = (e) => {\n    e.preventDefault();\n    const children = [...e.target.children]\n      .slice(0, -1)\n      .map((child) => child.value);\n    localStorage.setItem(\n      `${platform};entries`,\n      JSON.stringify([...platformEntries, children])\n    );\n    setPlatformEntries([...platformEntries, children]);\n    const toClear = [...e.target.children];\n    toClear.forEach((elem) => {\n      elem.value = \"\";\n    });\n    e.target.children[0].focus();\n  };\n\n  return (\n    <div id=\"mainDivPlatform\">\n      <div id=\"headDiv\">\n        <Header />\n        <span id=\"platformName\">{platform}</span>\n        <div id=\"hiddenDiv\"></div>\n      </div>\n      <div id=\"topTools\">\n        <TopButtonsPlatform\n          filter={filter}\n          setFilter={setFilter}\n          addColumn={addColumn}\n          setAddColumn={setAddColumn}\n          setTableEditable={setTableEditable}\n          tableEditable={tableEditable}\n          addEntry={addEntry}\n          setAddEntry={setAddEntry}\n        />\n        {addEntry && (\n          <FormAddEntry\n            submitNewEntry={submitNewEntry}\n            platformColumns={platformColumns}\n          />\n        )}\n        {addColumn && <FormAddColumn submitNewColumn={submitNewColumn} />}\n      </div>\n      {platformEntries.length === 0 ? (\n        filter === \"\" ? (\n          <div className=\"emptyTable\">\n            Click on the \"add an entry\" button to display the Table.\n          </div>\n        ) : (\n          <div className=\"emptyTable\">String not found in your data.</div>\n        )\n      ) : (\n        <PlatformTable\n          setPlatformColumns={setPlatformColumns}\n          setPlatformEntries={setPlatformEntries}\n          platformEntries={platformEntries}\n          platformColumns={platformColumns}\n          tableEditable={tableEditable}\n          platform={platform}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default Platform;\n"]},"metadata":{},"sourceType":"module"}